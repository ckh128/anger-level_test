<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í™§ë³‘(í™”ë³‘) ì§€ìˆ˜ í…ŒìŠ¤íŠ¸</title> 
<style>
Â  /* â­ï¸ 2. í•‘í¬ ë°°ê²½ ë“± ì›ë³¸ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤ */
Â  body {
Â  Â  font-family: "Pretendard", "Apple SD Gothic Neo", sans-serif;
Â  Â  background: linear-gradient(135deg, #fff0f0, #ffeaea);
Â  Â  color: #333;
Â  Â  margin: 0;
Â  Â  padding: 20px;
Â  Â  max-width: 600px;
Â  Â  margin-left: auto;
Â  Â  margin-right: auto;
Â  }
Â  h1 {
Â  Â  text-align: center;
Â  Â  color: #d24;
Â  Â  font-size: 1.8rem;
Â  }
Â  .question {
Â  Â  margin: 20px 0;
Â  Â  padding: 15px;
Â  Â  background: #fff;
Â  Â  border-radius: 15px;
Â  Â  box-shadow: 0 3px 6px rgba(0,0,0,0.1);
Â  Â  font-size: 0.95rem;
Â  }
Â  /* â­ï¸ 3. ë‹µë³€ ë¼ë²¨ì´ í•œ ì¤„ì”© ë³´ì´ë„ë¡ ìˆ˜ì •í•œ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤ */
Â  label {Â 
Â  Â  display: block; 
    margin: 8px 0;
    padding: 8px;
    border-radius: 8px;
    background: #f9f9f9;
    cursor: pointer;
    transition: background 0.2s;
Â  }
  label:hover {
    background: #f0f0f0;
  }
  input[type="radio"] {
    margin-right: 8px;
  }
Â  #submitBtn {
Â  Â  display: block;
Â  Â  margin: 30px auto;
Â  Â  background: #ff5252;
Â  Â  color: white;
Â  Â  border: none;
Â  Â  padding: 12px 25px;
Â  Â  border-radius: 10px;
Â  Â  font-size: 1rem;
Â  Â  cursor: pointer;
Â  Â  transition: 0.3s;
Â  }
Â  #submitBtn:hover {
Â  Â  background: #e04141;
Â  Â  transform: scale(1.03);
Â  }
Â  #result {
Â  Â  text-align: center;
Â  Â  margin-top: 30px;
Â  Â  font-size: 1rem;
Â  }
Â  .gauge {
Â  Â  width: 90%;
Â  Â  height: 20px;
Â  Â  background: #ddd;
Â  Â  border-radius: 15px;
Â  Â  margin: 15px auto;
Â  Â  overflow: hidden;
Â  }
Â  .bar {
Â  Â  height: 100%;
Â  Â  width: 0;
Â  Â  border-radius: 15px;
Â  Â  transition: width 1s ease, background 0.5s ease;
Â  }
Â  .share-btn {
Â  Â  background: #1da1f2;
Â  Â  color: white;
Â  Â  border: none;
Â  Â  padding: 10px 18px;
Â  Â  border-radius: 8px;
Â  Â  margin: 5px;
Â  Â  cursor: pointer;
Â  Â  font-size: 0.9rem;
Â  }
Â  .share-btn.kakao { background: #fae100; color: #3c1e1e; }
Â  .share-btn.copy { background: #444; }
Â  .share-btn.save { background: #ff7043; }
Â  .card {
Â  Â  width: 90%;
Â  Â  max-width: 340px;
Â  Â  margin: 25px auto;
Â  Â  background: white;
Â  Â  border-radius: 20px;
Â  Â  padding: 20px;
Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
Â  }
Â  .emoji { font-size: 2.8rem; }
Â  @media (max-width: 500px) {
Â  Â  body { padding: 10px; }
Â  Â  h1 { font-size: 1.5rem; }
Â  Â  .question { font-size: 0.9rem; }
Â  Â  #submitBtn { font-size: 0.9rem; padding: 10px 20px; }
Â  Â  .share-btn { font-size: 0.8rem; padding: 8px 15px; }
Â  }
</style>
</head>
<body>

<h1>ğŸ”¥ í™§ë³‘(í™”ë³‘) ì§€ìˆ˜ í…ŒìŠ¤íŠ¸</h1>
<p style="text-align:center;">
  í™”ë‚˜ëŠ” ìƒí™©ì—ì„œ ë‹¹ì‹ ì˜ <b>ì™¸ë¶€ ë°˜ì‘ ê°•ë„</b>ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?<br>
  (ë°˜ì‘ì´ ì—†ì„ìˆ˜ë¡ í™§ë³‘ ì§€ìˆ˜ê°€ ë†’ê²Œ ë‚˜ì˜µë‹ˆë‹¤)
</p>

<div id="quiz"></div>

<button id="submitBtn" onclick="calculate()">ê²°ê³¼ ë³´ê¸°</button>

<div id="result"></div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<script>
Â  // ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
Â  Kakao.init("e769fc93830b8cb68c6d46ab2864f317"); // ë³¸ì¸ í‚¤ë¡œ ìœ ì§€
Â  console.log("âœ… Kakao SDK ì´ˆê¸°í™” ì™„ë£Œ:", Kakao.isInitialized());
</script>

<script>
// (ë³€ìˆ˜ ì„ ì–¸: ì—¬ëŸ¬ í•¨ìˆ˜ì—ì„œ ì‚¬ìš©)
const questions = [
Â  "ì¹œêµ¬ê°€ ì•½ì†ì— 30ë¶„ ëŠ¦ì—ˆë‹¤. 'ë¯¸ì•ˆ! ì°¨ê°€ ë§‰í˜€ì„œ'ë¼ê³  í•  ë•Œ",
Â  "ì¡°ë³„ ê³¼ì œì—ì„œ ì¡°ì›ì´ ìë£Œ ì¡°ì‚¬ë¥¼ ì•„ì˜ˆ ì•ˆ í•´ì™”ë‹¤.",
Â  "ì¹œêµ¬ê°€ ë‚´ ì˜· ìŠ¤íƒ€ì¼ì„ ì§€ì í•œë‹¤. 'ë„ˆ ê·¸ê±° ì¢€ ì•ˆ ì–´ìš¸ë ¤.'",
Â  "ì—°ì¸ì´ ë‚˜ì™€ì˜ ì•½ì†ì„ ìŠì–´ë²„ë ¸ë‹¤.",
Â  "ë‚˜ì— ëŒ€í•œ ì˜¤í•´(ë’·ë‹´í™”)ë¥¼ ìš°ì—°íˆ ë“¤ì—ˆë‹¤.",
Â  "ì—…ë¬´/ê³¼ì œì—ì„œ ë‚´ ì˜ê²¬ì´ íƒ€ë‹¹í•œë°ë„ ê³„ì† ë¬´ì‹œë‹¹í•œë‹¤."
];
const MAX_SCORE_PER_QUESTION = 4; // 0-4ì  ì²™ë„

/**
 * â­ï¸ 6. í˜ì´ì§€ ë¡œë”©ì´ 'ì™„ë£Œ'ëœ í›„ì— í€´ì¦ˆ ìƒì„±ì„ ì‹œì‘í•©ë‹ˆë‹¤.
 * (ì´ê²ƒì´ ì§ˆë¬¸ì´ ì•ˆ ëœ¨ë˜ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤)
 */
window.onload = function() {
  const quizDiv = document.getElementById("quiz");
  
  if (!quizDiv) {
    console.error("í˜ì´ì§€ì— <div id='quiz'></div>ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!");
    return;
  }

  // í€´ì¦ˆ ì§ˆë¬¸ HTML ìƒì„±
  questions.forEach((q, i) => {
  Â  let html = `<div class="question"><p><b>${i + 1}. ${q}</b></p>`;
  Â  const labels = [
      "0ì : ë°˜ì‘ì´ ê±°ì˜ ì—†ìŒ (ì†ìœ¼ë¡œë§Œ ìƒê°)",
      "1ì : ë°˜ì‘ì´ ì•½í•¨ (ì•½ê°„ í‹°ë§Œ ëƒ„)",
      "2ì : ë³´í†µ (í•  ë§ì€ í•¨)",
      "3ì : ê°•í•¨ (ë¶ˆì¾Œí•¨ì„ í™•ì‹¤íˆ í‘œí˜„)",
      "4_ì : ì•„ì£¼ ê°•í•¨ (ì¦‰ì‹œ, ê°•í•˜ê²Œ í™”ë¥¼ ëƒ„)"
    ];
  Â  for (let j = 0; j <= MAX_SCORE_PER_QUESTION; j++) {
  Â  Â  html += `<label><input type="radio" name="q${i}" value="${j}"> ${labels[j]}</label>`;
  Â  }
  Â  html += "</div>";
  Â  quizDiv.innerHTML += html;
  });
}; // window.onload ë


/**
 * â­ï¸ 7. 'ê²°ê³¼ ë³´ê¸°' ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
 * (ì ìˆ˜ ë°˜ì „ ë¡œì§ ë° 100ì  ìŠ¤ì¼€ì¼ ë³€í™˜ í¬í•¨)
 */
function calculate() {
Â  let total_hwabyeong_score = 0; 
Â  
Â  for (let i = 0; i < questions.length; i++) {
Â  Â  const val_str = document.querySelector(`input[name=q${i}]:checked`);
Â  Â  if (val_str) {
      const reaction_strength = parseInt(val_str.value); // 0~4 (ë°˜ì‘ ê°•ë„)

      // ì ìˆ˜ ë°˜ì „: 0ì (ë°˜ì‘ ì—†ìŒ) -> 4ì  / 4ì (ë°˜ì‘ ê°•í•¨) -> 0ì 
      const score_for_this_question = MAX_SCORE_PER_QUESTION - reaction_strength;
      
      total_hwabyeong_score += score_for_this_question;
Â  Â  } else {
Â  Â  Â  alert(`${i + 1}ë²ˆ ë¬¸í•­ì— ë‹µí•´ì£¼ì„¸ìš”!`);
Â  Â  Â  return;
Â  Â  }
Â  }

Â  document.getElementById("quiz").style.display = "none";
Â  document.getElementById("submitBtn").style.display = "none";

Â  // 0-24ì  (6ê°œ*4ì ) -> 0-100ì  ìŠ¤ì¼€ì¼ë¡œ ë³€í™˜
Â  const maxScore = questions.length * MAX_SCORE_PER_QUESTION; // 24
Â  const level = Math.round((total_hwabyeong_score / maxScore) * 100);

Â  const hue = Math.round(200 - (level * 1.5)); 
Â  const barColor = `hsl(${hue}, 85%, 55%)`;

Â  // í™§ë³‘ ì§€ìˆ˜ì— ë§ëŠ” ê²°ê³¼ ë©”ì‹œì§€
Â  let msg = "", emoji = "";
Â  if (level < 40) { msg = "í•˜ê³  ì‹¶ì€ ë§ ë‹¤ í•˜ëŠ” 'ì‚¬ì´ë‹¤' íƒ€ì…"; emoji = "ğŸ¥¤"; }
Â  else if (level < 70) { msg = "í•„ìš”í•  ë• í‘œí˜„í•˜ëŠ” 'í˜„ëª…í•œ' íƒ€ì…"; emoji = "âš–ï¸"; }
Â  else if (level < 90) { msg = "ì†ì— ì¡°ê¸ˆ ìŒ“ì•„ë‘ëŠ” 'ë‹µë‹µì´' íƒ€ì…"; emoji = "ğŸ˜¥"; }
Â  else { msg = "ì†ì´ ìˆ¯ê²€ëŒ•ì´! 'K-í™§ë³‘' ìœ„í—˜ íƒ€ì…"; emoji = "ğŸŒ‹"; }

Â  const shareText = `ğŸ”¥ ë‚˜ì˜ í™§ë³‘ ì§€ìˆ˜ëŠ” ${level}%! (${msg}) ğŸ‘‰ ë„ˆë„ í…ŒìŠ¤íŠ¸ í•´ë´: https://ckh128.github.io/anger-level_test/`;

Â  document.getElementById("result").innerHTML = `
Â  Â  <div class="card" id="resultCard">
Â  Â  Â  <div class="emoji">${emoji}</div>
Â  Â  Â  <h2>ë‹¹ì‹ ì˜ í™§ë³‘ ì§€ìˆ˜: ${level}%</h2>
Â  Â  Â  <div class="gauge"><div class="bar" style="width:${level}%; background:${barColor};"></div></div>
Â  Â  Â  <p><b>${msg}</b></p>
Â  Â  Â  <button class="share-btn" onclick="shareTwitter('${shareText}')">íŠ¸ìœ„í„° ê³µìœ </button>
Â  Â  Â  <button class="share-btn kakao" onclick="shareKakao('${shareText}')">ì¹´ì¹´ì˜¤í†¡ ê³µìœ </button>
Â  Â  Â  <button class="share-btn copy" onclick="copyLink('${shareText}')">ë§í¬ ë³µì‚¬</button>
Â  Â  Â  <button class="share-btn save" onclick="saveImage()">ì´ë¯¸ì§€ ì €ì¥í•˜ê¸° ğŸ“¸</button>
Â  Â  </div>
Â  `;
}

// --- (ê³µìœ  ë° ì €ì¥ í•¨ìˆ˜) ---

function shareTwitter(text) {
Â  const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
Â  window.open(url, "_blank");
}

function shareKakao(text) {
Â  if (!Kakao.isInitialized()) {
Â  Â  alert("ì¹´ì¹´ì˜¤ SDKê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í‚¤ë¥¼ í™•ì¸í•˜ì„¸ìš”!");
Â  Â  return;
Â  }
Â  Kakao.Link.sendDefault({
Â  Â  objectType: 'feed',
Â  Â  content: {
Â  Â  Â  title: 'ğŸ”¥ í™§ë³‘(í™”ë³‘) ì§€ìˆ˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼', // ì¹´ì¹´ì˜¤ ê³µìœ  ì œëª©
Â  Â  Â  description: text,
Â  Â  Â  imageUrl: 'https://ckh128.github.io/anger-level_test/preview.png', 
Â  Â  Â  link: {
Â  Â  Â  Â  mobileWebUrl: 'https://ckh128.github.io/anger-level_test/',
Â  Â  Â  Â  webUrl: 'https://ckh128.github.io/anger-level_test/'
Â  Â  Â  }
Â  Â  }, 
Â  Â  buttons: [
Â  Â  Â  {
Â  Â  Â  Â  title: 'ë‚˜ë„ í…ŒìŠ¤íŠ¸í•˜ê¸°',
Â  Â  Â  Â  link: {
Â  Â  Â  Â  Â  mobileWebUrl: 'https://ckh128.github.io/anger-level_test/',
Â  Â  Â  Â  Â  webUrl: 'https://ckh128.github.io/anger-level_test/'
Â  Â  Â  Â  }
Â  Â  Â  }
Â  S ]
Â  });
}

async function copyLink(text) {
Â  try {
Â  Â  await navigator.clipboard.writeText(text);
Â  Â  alert("âœ… ê²°ê³¼ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\nì›í•˜ëŠ” SNSë‚˜ ë©”ì‹ ì €ì— ë¶™ì—¬ë„£ì–´ë³´ì„¸ìš”.");
Â  } catch (err) {
Â  Â  const temp = document.createElement("textarea");
Â  Â  temp.value = text;
Â  Â  document.body.appendChild(temp);
Â  Â  temp.select();
Â  Â  document.execCommand("copy");
Â  Â  document.body.removeChild(temp);
Â  Â  alert("âœ… ë³µì‚¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
Â  }
}

function saveImage() {
Â  const card = document.getElementById("resultCard");
Â  html2canvas(card, { scale: 2 }).then(canvas => {
Â  Â  const link = document.createElement("a");
Â  Â  link.download = "í™§ë³‘ì§€ìˆ˜_í…ŒìŠ¤íŠ¸ê²°ê³¼.png"; // ì´ë¯¸ì§€ ì €ì¥ íŒŒì¼ëª…
Â  Â  link.href = canvas.toDataURL("image/png");
Â  Â  link.click();
Â  });
}
</script>
</body>
</html>
